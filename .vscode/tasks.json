{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Cargo Test SQLite",
      "type": "shell",
      "command": "cargo test --package wikidex --bin wikidex -- breeder::operator:: --nocapture",
      "group": "test",
      "problemMatcher": "$rustc",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "options": {
        "cwd": "${workspaceRoot}/rust/",
        "env": {
          "DATABASE_URL": "sqlite://sqlite_dummy.db"
        }
      }
    },
    {
      "label": "All",
      "dependsOn": [
        "Sqlite + Triton + Server",
        "Postgres + Triton + Server",
        "Sqlite + vLLM + Server",
        "Postgres + vLLM + Server",
        "Sqlite + Triton + Ingest",
        "Postgres + Triton + Ingest",
        "Sqlite + vLLM + Ingest",
        "Postgres + vLLM + Ingest"
      ],
      "problemMatcher": "$rustc"
    },
    {
      "label": "Sqlite + Triton + Server",
      "type": "shell",
      "command": "cargo clippy --workspace --all-targets --no-default-features --features sqlite,triton,server",
      "group": "test",
      "problemMatcher": "$rustc",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "options": {
        "cwd": "${workspaceRoot}/wikidex/",
        "env": {
          "DATABASE_URL": "sqlite://sqlite_dummy.db"
        }
      }
    },
    {
      "label": "Postgres + Triton + Server",
      "type": "shell",
      "command": "cargo clippy --workspace --all-targets --no-default-features --features postgres,triton,server",
      "group": "test",
      "problemMatcher": "$rustc",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "options": {
        "cwd": "${workspaceRoot}/wikidex/",
        "env": {
          "DATABASE_URL": "postgres://postgres:postgres@192.168.1.120:5433/postgres"
        }
      }
    },
    {
      "label": "Sqlite + vLLM + Server",
      "type": "shell",
      "command": "cargo clippy --workspace --all-targets --no-default-features --features sqlite,openai,server",
      "group": "test",
      "problemMatcher": "$rustc",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "options": {
        "cwd": "${workspaceRoot}/wikidex/",
        "env": {
          "DATABASE_URL": "sqlite://sqlite_dummy.db"
        }
      }
    },
    {
      "label": "Postgres + vLLM + Server",
      "type": "shell",
      "command": "cargo clippy --workspace --all-targets --no-default-features --features postgres,openai,server",
      "group": "test",
      "problemMatcher": "$rustc",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "options": {
        "cwd": "${workspaceRoot}/wikidex/",
        "env": {
          "DATABASE_URL": "postgres://postgres:postgres@192.168.1.120:5433/postgres"
        }
      }
    },
    {
      "label": "Sqlite + Triton + Ingest",
      "type": "shell",
      "command": "cargo clippy --workspace --all-targets --no-default-features --features sqlite,triton,ingest",
      "group": "test",
      "problemMatcher": "$rustc",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "options": {
        "cwd": "${workspaceRoot}/wikidex/",
        "env": {
          "DATABASE_URL": "sqlite://sqlite_dummy.db",
          "CUDA": "/opt/cuda",
          "CC": "/opt/cuda/bin/gcc",
          "CXX": "/opt/cuda/bin/g++"
        }
      }
    },
    {
      "label": "Postgres + Triton + Ingest",
      "type": "shell",
      "command": "cargo clippy --workspace --all-targets --no-default-features --features postgres,triton,ingest",
      "group": "test",
      "problemMatcher": "$rustc",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "options": {
        "cwd": "${workspaceRoot}/wikidex/",
        "env": {
          "DATABASE_URL": "postgres://postgres:postgres@192.168.1.120:5433/postgres",
          "CUDA": "/opt/cuda",
          "CC": "/opt/cuda/bin/gcc",
          "CXX": "/opt/cuda/bin/g++"
        }
      }
    },
    {
      "label": "Sqlite + vLLM + Ingest",
      "type": "shell",
      "command": "cargo clippy --workspace --all-targets --no-default-features --features sqlite,openai,ingest",
      "group": "test",
      "problemMatcher": "$rustc",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "options": {
        "cwd": "${workspaceRoot}/wikidex/",
        "env": {
          "DATABASE_URL": "sqlite://sqlite_dummy.db",
          "CUDA": "/opt/cuda",
          "CC": "/opt/cuda/bin/gcc",
          "CXX": "/opt/cuda/bin/g++"
        }
      }
    },
    {
      "label": "Postgres + vLLM + Ingest",
      "type": "shell",
      "command": "cargo clippy --workspace --all-targets --no-default-features --features postgres,openai,ingest",
      "group": "test",
      "problemMatcher": "$rustc",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "options": {
        "cwd": "${workspaceRoot}/wikidex/",
        "env": {
          "DATABASE_URL": "postgres://postgres:postgres@192.168.1.120:5433/postgres",
          "CUDA": "/opt/cuda",
          "CC": "/opt/cuda/bin/gcc",
          "CXX": "/opt/cuda/bin/g++"
        }
      }
    }
  ]
}
